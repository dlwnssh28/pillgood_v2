{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-93b55820\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-melon\"\n}, \"주문 내역\", -1));\nconst _hoisted_3 = {\n  class: \"box-container-no-shade\"\n};\nconst _hoisted_4 = {\n  style: {\n    \"text-align\": \"left\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"font-weight\": \"bold\",\n    \"font-size\": \"20px\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"color\": \"gray\"\n  }\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_8 = {\n  style: {\n    \"text-align\": \"left\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"font-size\": \"20px\"\n  }\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_11 = {\n  key: 0,\n  class: \"btn-container\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, order => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: order.orderNo,\n      class: \"box-container\"\n    }, [_createElementVNode(\"p\", _hoisted_4, [_createElementVNode(\"span\", _hoisted_5, _toDisplayString(order.orderStatus), 1), _createTextVNode(\" \" + _toDisplayString(order.orderNo) + \" \", 1), _createElementVNode(\"span\", _hoisted_6, _toDisplayString($options.formatDate(order.orderDate)), 1), _hoisted_7]), _createElementVNode(\"p\", _hoisted_8, [_createElementVNode(\"span\", _hoisted_9, \"총액: \" + _toDisplayString(order.totalAmount) + \"원\", 1), _hoisted_10, _createVNode(_component_router_link, {\n      to: {\n        name: 'OrderDetail',\n        params: {\n          orderNo: order.orderNo\n        }\n      }\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"주문상세보기\")]),\n      _: 2\n    }, 1032, [\"to\"])]), order.orderStatus !== '구매확정' && order.orderStatus !== '취소완료' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"button\", {\n      class: \"btn btn-green\",\n      onClick: $event => $options.confirmPurchase(order.orderNo)\n    }, \"구매확정\", 8, _hoisted_12), _createElementVNode(\"button\", {\n      class: \"btn btn-gray\",\n      onClick: $event => $options.goToReturnPage(order)\n    }, \"환불요청\", 8, _hoisted_13)])) : _createCommentVNode(\"\", true)]);\n  }), 128))])]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","orders","order","orderNo","_hoisted_4","_hoisted_5","_toDisplayString","orderStatus","_createTextVNode","_hoisted_6","$options","formatDate","orderDate","_hoisted_7","_hoisted_8","_hoisted_9","totalAmount","_hoisted_10","_createVNode","_component_router_link","to","name","params","default","_withCtx","_","_hoisted_11","onClick","$event","confirmPurchase","_hoisted_12","goToReturnPage","_hoisted_13","_createCommentVNode"],"sources":["C:\\Users\\woori\\IdeaProjects\\pillgood_v2\\src\\frontend\\src\\views\\OrderHistory.vue"],"sourcesContent":["<template>\n  <div class=\"main-container\">\n    <h2 class=\"text-melon\">주문 내역</h2>\n    <div class=\"box-container-no-shade\">\n      <!-- 주문 리스트 -->\n      <div v-for=\"order in orders\" :key=\"order.orderNo\" class=\"box-container\">\n        <p style=\"text-align: left;\">\n          <span style=\"font-weight: bold; font-size: 20px;\">{{ order.orderStatus }}</span>\n          {{ order.orderNo }}\n          <span style=\"color:gray;\">{{ formatDate(order.orderDate) }}</span><br>\n        </p>\n        <p style=\"text-align: left;\">\n          <span style=\"font-size:20px;\">총액: {{ order.totalAmount }}원</span><br>\n          <router-link :to=\"{ name: 'OrderDetail', params: { orderNo: order.orderNo }}\">주문상세보기</router-link>\n        </p>\n        <div v-if=\"order.orderStatus !== '구매확정' && order.orderStatus !== '취소완료'\" class=\"btn-container\">\n          <button class=\"btn btn-green\" @click=\"confirmPurchase(order.orderNo)\">구매확정</button>\n          <button class=\"btn btn-gray\" @click=\"goToReturnPage(order)\">환불요청</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from '../axios';\nimport '../assets/styles.css';\n\nexport default {\n  data() {\n    return {\n      orders: [],\n      loading: true,\n    };\n  },\n  methods: {\n    async fetchOrders() {\n      try {\n        const response = await axios.get('/api/orders/member');\n        this.orders = response.data.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));\n      } catch (error) {\n        console.error('Failed to fetch orders:', error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    async confirmPurchase(orderNo) {\n      try {\n        await axios.put(`/api/orders/update-status/${orderNo}`, { status: '구매확정' });\n        await this.fetchOrders();\n      } catch (error) {\n        console.error('Failed to confirm purchase:', error);\n      }\n    },\n    goToReturnPage(order) {\n      this.$router.push({ name: 'CancelPayment', params: { orderNo: order.orderNo } });\n    },\n    formatDate(dateString) {\n      const options = { year: '2-digit', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' };\n      const date = new Date(dateString);\n      return `${date.toLocaleDateString('ko-KR', options).replace(/\\./g, '.').replace(/\\s/g, '').slice(0, -1)} 주문`;\n    }\n  },\n  async created() {\n    await this.fetchOrders();\n  }\n};\n</script>\n\n<style scoped>\n.main-container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.loading {\n  font-size: 20px;\n}\n\n.box-container {\n  margin-top: 20px;\n}\n\n.btn-container {\n  display: flex;\n  gap: 10px;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAgB;gEACzBC,mBAAA,CAAiC;EAA7BD,KAAK,EAAC;AAAY,GAAC,OAAK;;EACvBA,KAAK,EAAC;AAAwB;;EAG5BE,KAAyB,EAAzB;IAAA;EAAA;AAAyB;;EACpBA,KAA2C,EAA3C;IAAA;IAAA;EAAA;AAA2C;;EAE3CA,KAAmB,EAAnB;IAAA;EAAA;AAAmB;gEAAyCD,mBAAA,CAAI;;EAErEC,KAAyB,EAAzB;IAAA;EAAA;AAAyB;;EACpBA,KAAuB,EAAvB;IAAA;EAAA;AAAuB;iEAAoCD,mBAAA,CAAI;;EAZ/EE,GAAA;EAeiFH,KAAK,EAAC;;oBAfvF;oBAAA;;;uBACEI,mBAAA,CAoBM,OApBNC,UAoBM,GAnBJC,UAAiC,EACjCL,mBAAA,CAiBM,OAjBNM,UAiBM,I,kBAfJH,mBAAA,CAcMI,SAAA,QAnBZC,WAAA,CAK2BC,KAAA,CAAAC,MAAM,EAAfC,KAAK;yBAAjBR,mBAAA,CAcM;MAdwBD,GAAG,EAAES,KAAK,CAACC,OAAO;MAAEb,KAAK,EAAC;QACtDC,mBAAA,CAII,KAJJa,UAII,GAHFb,mBAAA,CAAgF,QAAhFc,UAAgF,EAAAC,gBAAA,CAA3BJ,KAAK,CAACK,WAAW,OAPhFC,gBAAA,CAO0F,GAChF,GAAAF,gBAAA,CAAGJ,KAAK,CAACC,OAAO,IAAG,GACnB,MAAAZ,mBAAA,CAAkE,QAAlEkB,UAAkE,EAAAH,gBAAA,CAArCI,QAAA,CAAAC,UAAU,CAACT,KAAK,CAACU,SAAS,QAAWC,UAAI,C,GAExEtB,mBAAA,CAGI,KAHJuB,UAGI,GAFFvB,mBAAA,CAAiE,QAAjEwB,UAAiE,EAAnC,MAAI,GAAAT,gBAAA,CAAGJ,KAAK,CAACc,WAAW,IAAG,GAAC,MAAOC,WAAI,EACrEC,YAAA,CAAkGC,sBAAA;MAApFC,EAAE;QAAAC,IAAA;QAAAC,MAAA;UAAAnB,OAAA,EAA4CD,KAAK,CAACC;QAAO;MAAA;;MAbnFoB,OAAA,EAAAC,QAAA,CAawF,MAAM,CAb9FhB,gBAAA,CAawF,QAAM,E;MAb9FiB,CAAA;wBAemBvB,KAAK,CAACK,WAAW,eAAeL,KAAK,CAACK,WAAW,e,cAA5Db,mBAAA,CAGM,OAHNgC,WAGM,GAFJnC,mBAAA,CAAmF;MAA3ED,KAAK,EAAC,eAAe;MAAEqC,OAAK,EAAAC,MAAA,IAAElB,QAAA,CAAAmB,eAAe,CAAC3B,KAAK,CAACC,OAAO;OAAG,MAAI,KAhBpF2B,WAAA,GAiBUvC,mBAAA,CAAyE;MAAjED,KAAK,EAAC,cAAc;MAAEqC,OAAK,EAAAC,MAAA,IAAElB,QAAA,CAAAqB,cAAc,CAAC7B,KAAK;OAAG,MAAI,KAjB1E8B,WAAA,E,KAAAC,mBAAA,W","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}