{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-045c0c2e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-melon\"\n}, \"리뷰 작성\", -1));\nconst _hoisted_3 = {\n  style: {\n    \"text-align\": \"left\",\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"btn-container\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-green\"\n}, \"리뷰 작성\")], -1));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_star_rating = _resolveComponent(\"star-rating\");\n  const _component_rich_text_editor = _resolveComponent(\"rich-text-editor\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $options.productImage,\n    alt: \"Product Image\",\n    style: {\n      \"width\": \"150px\"\n    }\n  }, null, 8, _hoisted_4), _createElementVNode(\"p\", null, [_createTextVNode(\" 주문 번호: \" + _toDisplayString($options.orderNo), 1), _hoisted_5, _createTextVNode(\" 주문 날짜: \" + _toDisplayString($options.formattedOrderDate), 1), _hoisted_6, _createTextVNode(\" 제품 이름: \" + _toDisplayString($options.productName), 1)])]), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitReview && $options.submitReview(...args), [\"prevent\"]))\n  }, [_createVNode(_component_star_rating, {\n    modelValue: $data.rating,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.rating = $event),\n    \"star-size\": 30,\n    \"show-rating\": false,\n    style: {\n      \"margin\": \"0 auto 10px auto\"\n    }\n  }, null, 8, [\"modelValue\"]), _createElementVNode(\"div\", null, [$data.error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString($data.error), 1)) : _createCommentVNode(\"\", true), _createVNode(_component_rich_text_editor, {\n    modelValue: $data.reviewContent,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.reviewContent = $event),\n    ref: \"richTextEditor\",\n    onTextChange: $options.handleTextChange\n  }, null, 8, [\"modelValue\", \"onTextChange\"])]), _hoisted_8], 32)]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","key","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","src","$options","productImage","alt","_hoisted_4","_createTextVNode","_toDisplayString","orderNo","_hoisted_5","formattedOrderDate","_hoisted_6","productName","onSubmit","_cache","_withModifiers","args","submitReview","_createVNode","_component_star_rating","modelValue","$data","rating","$event","error","_hoisted_7","_createCommentVNode","_component_rich_text_editor","reviewContent","ref","onTextChange","handleTextChange","_hoisted_8"],"sources":["C:\\Users\\woori\\IdeaProjects\\pillgood_v2\\src\\frontend\\src\\views\\ReviewCreate.vue"],"sourcesContent":["<template>\n  <div class=\"main-container\">\n    <h2 class=\"text-melon\">리뷰 작성</h2>\n    <div style=\"text-align: left; display: flex\">\n      <img :src=\"productImage\" alt=\"Product Image\" style=\"width: 150px;\">\n      <p>\n        주문 번호: {{ orderNo }}<br>\n        주문 날짜: {{ formattedOrderDate }}<br>\n        제품 이름: {{ productName }}\n      </p>\n    </div>\n    <form @submit.prevent=\"submitReview\">\n      <star-rating \n        v-model=\"rating\" \n        :star-size=\"30\" \n        :show-rating=\"false\"\n        style=\"margin: 0 auto 10px auto;\"\n      ></star-rating>\n      <div>\n        <span v-if=\"error\" class=\"error\">{{ error }}</span> <!-- 에러 메시지 표시 -->\n        <rich-text-editor v-model=\"reviewContent\" ref=\"richTextEditor\" @text-change=\"handleTextChange\"></rich-text-editor>\n      </div>\n      <div class=\"btn-container\">\n        <button type=\"submit\" class=\"btn btn-green\">리뷰 작성</button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport '../assets/styles.css';\nimport StarRating from 'vue3-star-ratings'; // 기본 내보내기로 수정\nimport RichTextEditor from '@/components/RichTextEditor.vue';\n\nexport default {\n  components: {\n    'star-rating': StarRating,\n    'rich-text-editor': RichTextEditor,\n  },\n  data() {\n    return {\n      reviewContent: '',\n      rating: 0,\n      error: null, // 에러 메시지\n    };\n  },\n  computed: {\n    orderNo() {\n      return this.$route.query.orderNo;\n    },\n    orderDate() {\n      return this.$route.query.orderDate;\n    },\n    productId() {\n      return this.$route.query.productId;\n    },\n    productName() {\n      return this.$route.query.productName;\n    },\n    productImage() {\n      return this.$route.query.productImage;\n    },\n    orderDetailNo() {\n      return this.$route.query.orderDetailNo;\n    },\n    formattedOrderDate() {\n      const options = { month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' };\n      const formattedDate = new Date(this.orderDate).toLocaleDateString('ko-KR', options).replace(/\\./g, '').replace(/\\s/g, '. ');\n      return `${formattedDate}. 주문`;\n    },\n  },\n  mounted() {\n    console.log('Received query params:');\n    console.log('orderNo:', this.orderNo);\n    console.log('orderDate:', this.orderDate);\n    console.log('productId:', this.productId);\n    console.log('productName:', this.productName);\n    console.log('productImage:', this.productImage);\n    console.log('orderDetailNo', this.orderDetailNo);\n  },\n  methods: {\n    ...mapActions('review', ['createReview']),\n    handleTextChange(textContent) {\n      console.log('Text content:', textContent);\n      if (textContent.length >= 10){\n        this.error = null;\n      } else {\n        this.error = '리뷰는 최소 10자 이상 작성해야 합니다.'\n      }\n    },\n    async submitReview() {\n\n      const textContent = this.$refs.richTextEditor.getTextContent();\n      console.log('textContent.length:', textContent.length); // textContent.length 출력\n\n      if (textContent.length < 10) {\n        this.error = '리뷰는 최소 10자 이상 작성해야 합니다.';\n        return;\n      }\n\n      this.error = null; // 에러 메시지 제거\n\n      try {\n        const reviewData = {\n          orderNo: this.orderNo,\n          orderDate: this.orderDate,\n          productId: this.productId,\n          productName: this.productName,\n          reviewContent: this.reviewContent,\n          rating: this.rating,\n          memberUniqueId: this.memberId,\n          reviewDate: new Date().toISOString(),\n          orderDetailNo: this.orderDetailNo\n        };\n        console.log('리뷰 제출:', reviewData);\n        await this.createReview(reviewData);\n        alert('리뷰가 성공적으로 제출되었습니다.');\n        this.$router.push('/order-history');\n      } catch (error) {\n        console.error('리뷰 제출 실패:', error);\n        alert('리뷰 제출에 실패했습니다.');\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.error {\n  color: red;\n  margin-top: 5px;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAgB;gEACzBC,mBAAA,CAAiC;EAA7BD,KAAK,EAAC;AAAY,GAAC,OAAK;;EACvBE,KAAuC,EAAvC;IAAA;IAAA;EAAA;AAAuC;mBAHhD;gEAM4BD,mBAAA,CAAI;gEACOA,mBAAA,CAAI;;EAP3CE,GAAA;EAmB2BH,KAAK,EAAC;;gEAG3BC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAe,I,aACxBC,mBAAA,CAA0D;EAAlDG,IAAI,EAAC,QAAQ;EAACJ,KAAK,EAAC;GAAgB,OAAK,E;;;;uBAtBvDK,mBAAA,CAyBM,OAzBNC,UAyBM,GAxBJC,UAAiC,EACjCN,mBAAA,CAOM,OAPNO,UAOM,GANJP,mBAAA,CAAmE;IAA7DQ,GAAG,EAAEC,QAAA,CAAAC,YAAY;IAAEC,GAAG,EAAC,eAAe;IAACV,KAAqB,EAArB;MAAA;IAAA;cAJnDW,UAAA,GAKMZ,mBAAA,CAII,YATVa,gBAAA,CAKS,UACM,GAAAC,gBAAA,CAAGL,QAAA,CAAAM,OAAO,OAAGC,UAAI,EANhCH,gBAAA,CAMgC,UACjB,GAAAC,gBAAA,CAAGL,QAAA,CAAAQ,kBAAkB,OAAGC,UAAI,EAP3CL,gBAAA,CAO2C,UAC5B,GAAAC,gBAAA,CAAGL,QAAA,CAAAU,WAAW,M,KAGzBnB,mBAAA,CAcO;IAdAoB,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAXjBC,cAAA,KAAAC,IAAA,KAW2Bd,QAAA,CAAAe,YAAA,IAAAf,QAAA,CAAAe,YAAA,IAAAD,IAAA,CAAY;MACjCE,YAAA,CAKeC,sBAAA;IAjBrBC,UAAA,EAaiBC,KAAA,CAAAC,MAAM;IAbvB,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAaiBF,KAAA,CAAAC,MAAM,GAAAC,MAAA;IACd,WAAS,EAAE,EAAE;IACb,aAAW,EAAE,KAAK;IACnB7B,KAAiC,EAAjC;MAAA;IAAA;+BAEFD,mBAAA,CAGM,cAFQ4B,KAAA,CAAAG,KAAK,I,cAAjB3B,mBAAA,CAAmD,QAAnD4B,UAAmD,EAAAlB,gBAAA,CAAfc,KAAA,CAAAG,KAAK,SAnBjDE,mBAAA,YAoBQR,YAAA,CAAkHS,2BAAA;IApB1HP,UAAA,EAoBmCC,KAAA,CAAAO,aAAa;IApBhD,uBAAAd,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAoBmCF,KAAA,CAAAO,aAAa,GAAAL,MAAA;IAAEM,GAAG,EAAC,gBAAgB;IAAEC,YAAW,EAAE5B,QAAA,CAAA6B;iDAE/EC,UAEM,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}