{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"main-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-melon\"\n}, \"상품등록\", -1);\nconst _hoisted_3 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"td\", null, \"제품명:\", -1);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"td\", null, \"영양제:\", -1);\nconst _hoisted_6 = {\n  class: \"select-input-flex\",\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: null,\n  selected: \"\"\n}, \"선택 안 함\", -1);\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"option\", {\n  style: {\n    \"color\": \"red\"\n  },\n  value: 'new'\n}, \"+ Add New Nutrient\", -1);\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = [\"value\"];\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"td\", null, \"가격:\", -1);\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"td\", null, \"재고:\", -1);\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"td\", null, \"대상:\", -1);\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"공통\"\n}, \"공통\", -1);\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"여성\"\n}, \"여성\", -1);\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"남성\"\n}, \"남성\", -1);\nconst _hoisted_17 = [_hoisted_14, _hoisted_15, _hoisted_16];\nconst _hoisted_18 = {\n  class: \"box-container\"\n};\nconst _hoisted_19 = {\n  class: \"btn-container\"\n};\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-green\"\n}, \"Create Product\", -1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_RichTextEditor = _resolveComponent(\"RichTextEditor\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _cache[11] || (_cache[11] = _withModifiers((...args) => $options.handleCreateProduct && $options.handleCreateProduct(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"table\", _hoisted_3, [_createElementVNode(\"tr\", null, [_hoisted_4, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.product.productName = $event),\n    type: \"text\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.product.productName]])])]), _createElementVNode(\"tr\", null, [_hoisted_5, _createElementVNode(\"td\", _hoisted_6, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.product.nutrientId = $event),\n    onChange: _cache[2] || (_cache[2] = (...args) => $options.handleNutrientChange && $options.handleNutrientChange(...args))\n  }, [_hoisted_7, _hoisted_8, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.nutrients, nutrient => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: nutrient.nutrientId,\n      value: nutrient.nutrientId\n    }, _toDisplayString(nutrient.nutrientName), 9, _hoisted_9);\n  }), 128))], 544), [[_vModelSelect, $data.product.nutrientId]]), $data.product.nutrientId === 'new' ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 0,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.newNutrientName = $event),\n    type: \"text\",\n    placeholder: \"Enter Nutrient Name\"\n  }, null, 512)), [[_vModelText, $data.newNutrientName]]) : _createCommentVNode(\"\", true), $data.product.nutrientId === 'new' ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 1,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.newNutrientDescription = $event),\n    type: \"text\",\n    placeholder: \"Enter Nutrient Description\"\n  }, null, 512)), [[_vModelText, $data.newNutrientDescription]]) : (_openBlock(), _createElementBlock(\"input\", {\n    key: 2,\n    type: \"text\",\n    value: $options.selectedNutrientDescription,\n    disabled: \"\"\n  }, null, 8, _hoisted_10)), $data.product.nutrientId === 'new' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 3,\n    class: \"small-btn\",\n    type: \"button\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.saveNewNutrient && $options.saveNewNutrient(...args))\n  }, \"Save\")) : _createCommentVNode(\"\", true)])]), _createElementVNode(\"tr\", null, [_hoisted_11, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.product.price = $event),\n    type: \"number\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.product.price]])])]), _createElementVNode(\"tr\", null, [_hoisted_12, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.product.stock = $event),\n    type: \"number\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.product.stock]])])]), _createElementVNode(\"tr\", null, [_hoisted_13, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.product.target = $event),\n    required: \"\"\n  }, _hoisted_17, 512), [[_vModelSelect, $data.product.target]])])])]), _createVNode(_component_RichTextEditor, {\n    modelValue: $data.product.productImage,\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.product.productImage = $event),\n    contentType: \"html\"\n  }, null, 8, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_hoisted_20, _createElementVNode(\"button\", {\n    class: \"btn btn-gray\",\n    onClick: _cache[10] || (_cache[10] = (...args) => $options.navigateToProductList && $options.navigateToProductList(...args))\n  }, \"Cancel\")])])], 32)]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","value","selected","_hoisted_14","_hoisted_15","_hoisted_16","type","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","handleCreateProduct","_hoisted_3","_hoisted_4","$event","$data","product","productName","required","_hoisted_5","_hoisted_6","nutrientId","onChange","handleNutrientChange","_hoisted_7","_hoisted_8","_Fragment","_renderList","_ctx","nutrients","nutrient","key","nutrientName","_hoisted_9","newNutrientName","placeholder","_createCommentVNode","newNutrientDescription","selectedNutrientDescription","disabled","_hoisted_10","onClick","saveNewNutrient","_hoisted_11","price","_hoisted_12","stock","_hoisted_13","target","_hoisted_17","_createVNode","_component_RichTextEditor","modelValue","productImage","contentType","_hoisted_18","_hoisted_19","_hoisted_20","navigateToProductList"],"sources":["C:\\Users\\woori\\IdeaProjects\\pillgood_v2\\src\\frontend\\src\\views\\product\\ProductCreate.vue"],"sourcesContent":["<template>\n  <div class=\"main-container\">\n    <h1 class=\"text-melon\">상품등록</h1>\n    <form @submit.prevent=\"handleCreateProduct\">\n      <table style=\"width: 100%\">\n        <tr>\n          <td>제품명:</td>\n          <td><input v-model=\"product.productName\" type=\"text\" required /></td>\n        </tr>\n        <tr>\n          <td>영양제:</td>\n          <td class=\"select-input-flex\" style=\"display:flex\">\n            <select v-model=\"product.nutrientId\" @change=\"handleNutrientChange\">\n              <option :value=\"null\" selected>선택 안 함</option>\n              <option style=\"color:red;\" :value=\"'new'\">+ Add New Nutrient</option>\n              <option v-for=\"nutrient in nutrients\" :key=\"nutrient.nutrientId\" :value=\"nutrient.nutrientId\">\n                {{ nutrient.nutrientName }}\n              </option>\n            </select>\n            <input v-if=\"product.nutrientId === 'new'\" v-model=\"newNutrientName\" type=\"text\" placeholder=\"Enter Nutrient Name\" />\n            <input v-if=\"product.nutrientId === 'new'\" v-model=\"newNutrientDescription\" type=\"text\" placeholder=\"Enter Nutrient Description\" />\n            <input v-else type=\"text\" :value=\"selectedNutrientDescription\" disabled />\n            <button class=\"small-btn\" v-if=\"product.nutrientId === 'new'\" type=\"button\" @click=\"saveNewNutrient\">Save</button>\n          </td>\n        </tr>\n        <tr>\n          <td>가격:</td>\n          <td><input v-model=\"product.price\" type=\"number\" required /></td>\n          <!-- <td>상태:</td>\n          <td><input v-model=\"product.active\" type=\"number\" required /></td> -->\n        </tr>\n        <tr>\n          <td>재고:</td>\n          <td><input v-model=\"product.stock\" type=\"number\" required /></td>\n        </tr>\n        <tr>\n          <td>대상:</td>\n          <td>\n            <select v-model=\"product.target\" required>\n              <option value=\"공통\">공통</option>\n              <option value=\"여성\">여성</option>\n              <option value=\"남성\">남성</option>\n            </select>\n          </td>\n        </tr>\n      </table>\n      <RichTextEditor v-model=\"product.productImage\" contentType=\"html\"/>\n      <div class=\"box-container\">\n        <div class=\"btn-container\">\n          <button type=\"submit\" class=\"btn btn-green\">Create Product</button>\n          <button class=\"btn btn-gray\" @click=\"navigateToProductList\">Cancel</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport RichTextEditor from '@/components/RichTextEditor.vue'\n\nexport default {\n  name: 'ProductCreate',\n  components: {\n    RichTextEditor\n  },\n  data() {\n    return {\n      product: {\n        productName: '',\n        nutrientId: null, \n        price: '',\n        stock: '',\n        target: '공통',\n        productImage: '', \n        active: true \n      },\n      newNutrientName: '', // 새로 추가되는 nutrient name\n      newNutrientDescription: '' // 새로 추가되는 nutrient description\n    };\n  },\n  async created() {\n    await this.fetchNutrients();\n  },\n  computed: {\n    ...mapGetters('nutrient', ['nutrients']),\n    nutrientList() {\n      console.log('nutrients 상태:', this.nutrients); // nutrients 상태 로그\n      return this.nutrients;\n    },\n    selectedNutrientDescription() {\n      const selectedNutrient = this.nutrientList.find(nutrient => nutrient.nutrientId === this.product.nutrientId);\n      return selectedNutrient ? selectedNutrient.description : '';\n    }\n  },\n  methods: {\n    ...mapActions('nutrient', ['fetchNutrients', 'createNutrient']),\n    ...mapActions('product', ['createProduct']),\n    handleNutrientChange() {\n      if (this.product.nutrientId !== 'new') {\n        this.newNutrientName = '';\n        this.newNutrientDescription = '';\n      }\n    },\n    async saveNewNutrient() {\n      if (!this.newNutrientName || !this.newNutrientDescription) {\n        alert('영양제와 효능을 입력해주세요');\n        return;\n      }\n\n      try {\n        console.log('새 영양소 저장 시도:', { nutrientName: this.newNutrientName, description: this.newNutrientDescription });\n        const newNutrient = await this.createNutrient({\n          nutrientName: this.newNutrientName,\n          description: this.newNutrientDescription\n        });\n        console.log('새로운 영양제 등록 응답:', newNutrient); // 생성 응답 로그 추가\n        this.product.nutrientId = newNutrient.nutrientId;\n        alert('새로운 영양제 등록 성공');\n        await this.fetchNutrients(); // 새로운 영양소 목록을 다시 가져옵니다.\n      } catch (error) {\n        console.error('새로운 영양제 등록 실패:', error);\n        alert('새로운 영양제를 등록하는 데 실패했습니다.');\n      }\n    },\n    async handleCreateProduct() {\n      try {\n        console.log('폼 제출 전 제품 정보:', this.product); // 폼 제출 전 데이터 확인\n        await this.createProduct(this.product);\n        console.log('제품 등록 완료');\n        this.navigateToProductList(); // 등록 성공 후 제품 목록 페이지로 이동\n      } catch (error) {\n        console.error('제품 등록 실패:', error);\n      }\n    },\n    navigateToProductList() {\n      this.$router.push('/productlist');\n    }\n  }\n};\n</script>\n\n\n<style>\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}